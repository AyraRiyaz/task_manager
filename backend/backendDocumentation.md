# Task Management Backend - MERN Stack Assessment

## Overview

This is a Node.js/Express backend for a Simple Task Management application. It provides RESTful API endpoints to manage tasks with MongoDB as the database.

---

## Architecture & Design Decisions

### 1. Technology Stack

- **Runtime:** Node.js
- **Framework:** Express.js (lightweight, minimalist web framework)
- **Database:** MongoDB with Mongoose ODM
- **HTTP Client:** Built-in HTTP methods in Express

**Why these choices?**

- Express is the de-facto standard for Node.js REST APIs
- MongoDB provides flexible document storage for tasks
- Mongoose adds schema validation and ODM capabilities

### 2. Project Structure

```
backend/
├── models/
│   └── Task.js           # Mongoose schema and model
├── controllers/
│   └── taskController.js # Business logic for task operations
├── routes/
│   └── taskRoutes.js     # API endpoint definitions
├── db.js                 # MongoDB connection logic
├── server.js             # Express app setup and server start
├── package.json          # Dependencies
├── .env                  # Environment variables
└── .gitignore            # Git ignore rules
```

**Rationale:**

- **Models:** Centralized data schema definition
- **Controllers:** Separates business logic from routing
- **Routes:** Clean endpoint organization and HTTP method handling
- **db.js:** Single responsibility for database connection

### 3. Data Model

**Task Schema:**

```javascript
{
  _id: ObjectId,           // Auto-generated by MongoDB
  title: String,           // Required, trimmed
  status: String,          // Enum: 'to-do', 'in-progress', 'completed'
  createdAt: Date          // Auto-set to current date
}
```

**Why these fields?**

- `title`: Unique identifier for the task
- `status`: Tracks task progress through workflow
- `createdAt`: Records when task was created (useful for sorting, auditing)
- `_id`: MongoDB default primary key for uniqueness

---

## API Endpoints

### Base URL

```
http://localhost:5000/api/tasks
```

### Endpoints

#### 1. Get All Tasks

```
GET /api/tasks
```

**Response (200 OK):**

```json
{
  "success": true,
  "data": [
    {
      "_id": "507f1f77bcf86cd799439011",
      "title": "Learn React",
      "status": "in-progress",
      "createdAt": "2026-01-22T10:30:00Z"
    }
  ]
}
```

**Features:**

- Returns all tasks sorted by `createdAt` (newest first)
- Handles empty task list gracefully

---

#### 2. Create Task

```
POST /api/tasks
Content-Type: application/json

{
  "title": "Complete project documentation"
}
```

**Response (201 Created):**

```json
{
  "success": true,
  "message": "Task created successfully",
  "data": {
    "_id": "507f1f77bcf86cd799439012",
    "title": "Complete project documentation",
    "status": "to-do",
    "createdAt": "2026-01-22T11:00:00Z"
  }
}
```

**Validation:**

- Title is **required** (returns 400 if missing)
- Title is **trimmed** (removes leading/trailing whitespace)
- Status **defaults to "to-do"** if not provided
- Only accepted statuses: `to-do`, `in-progress`, `done`

**Error Handling:**

- 400 Bad Request: Missing or invalid title
- 500 Internal Server Error: Database error

---

#### 3. Update Task

```
PUT /api/tasks/:id
Content-Type: application/json

{
  "status": "in-progress"
}
```

or

```json
{
  "title": "Updated title",
  "status": "done"
}
```

**Response (200 OK):**

```json
{
  "success": true,
  "message": "Task updated successfully",
  "data": {
    "_id": "507f1f77bcf86cd799439011",
    "title": "Learn React",
    "status": "in-progress",
    "createdAt": "2026-01-22T10:30:00Z"
  }
}
```

**Business Logic - Status Flow Validation:**

This is the **most important feature**. Tasks cannot skip status states:

| Current Status  | Can Move To        | Cannot Move To    |
| --------------- | ------------------ | ----------------- |
| `to-do`       | `in-progress` ✅ | `done` ❌       |
| `in-progress` | `done` ✅        | `to-do` ❌      |
| `done`        | N/A                | Any (final state) |

**Why this matters:**

- Ensures proper workflow: Planning → Execution → Completion
- Prevents accidental task state corruption
- Enforces business process at the backend level

**Error Response (400 Bad Request):**

```json
{
  "success": false,
  "message": "Cannot move task from to-do directly to completed. Must go through in-progress first."
}
```

**Error Cases:**

- 400 Bad Request: Invalid status transition
- 404 Not Found: Task ID doesn't exist
- 500 Internal Server Error: Database error

---

#### 4. Delete Task

```
DELETE /api/tasks/:id
```

**Response (200 OK):**

```json
{
  "success": true,
  "message": "Task deleted successfully",
  "data": {
    "_id": "507f1f77bcf86cd799439011",
    "title": "Learn React",
    "status": "in-progress",
    "createdAt": "2026-01-22T10:30:00Z"
  }
}
```

**Features:**

- Returns deleted task data for confirmation

**Error Cases:**

- 404 Not Found: Task ID doesn't exist
- 500 Internal Server Error: Database error

---

## Error Handling Strategy

### HTTP Status Codes Used

| Code | Meaning               | When Used                          |
| ---- | --------------------- | ---------------------------------- |
| 200  | OK                    | Successful GET, PUT, DELETE        |
| 201  | Created               | Successful POST                    |
| 400  | Bad Request           | Invalid input or status transition |
| 404  | Not Found             | Task ID doesn't exist              |
| 500  | Internal Server Error | Database or unexpected errors      |

### Error Response Format

```json
{
  "success": false,
  "message": "Human-readable error message",
  "error": "Technical error details (in development)"
}
```

### Implementation Details

All endpoints wrap operations in **try-catch blocks**:

```javascript
try {
  // Database operation
  const result = await Task.findById(id);
  
  if (!result) {
    return res.status(404).json({
      success: false,
      message: 'Task not found'
    });
  }
  
  res.status(200).json({
    success: true,
    data: result
  });
} catch (error) {
  res.status(500).json({
    success: false,
    message: 'Error message',
    error: error.message
  });
}
```

---

## Database Connection

### MongoDB Connection Logic

**File:** `db.js`

```javascript
const mongoose = require('mongoose');

const connectDB = async () => {
  try {
    await mongoose.connect(process.env.MONGODB_URI);
    console.log('MongoDB connected successfully');
  } catch (error) {
    console.error('MongoDB connection error:', error.message);
    process.exit(1); // Exit if can't connect
  }
};
```

**Features:**

- **Async/Await Pattern:** Modern Promise handling
- **Connection Retry:** Mongoose handles auto-reconnection
- **Error Logging:** Clear console message for debugging
- **Fail-Fast:** Exits process if connection fails (prevents server running without DB)

### Environment Configuration

**File:** `.env`

MONGODB_URI=mongodb://localhost:27017/task_management
PORT=5000

---

## Request/Response Cycle Example

### Complete Example: Update Task Status

**Frontend sends:**

```http
PUT /api/tasks/507f1f77bcf86cd799439011
Content-Type: application/json

{
  "status": "in-progress"
}
```

**Backend processing:**

1. **Route** (`taskRoutes.js`): Route matches and calls `updateTask` controller
2. **Controller** (`taskController.js`):
   - Extracts `id` from URL parameter
   - Extracts `status` from request body
   - Finds task by ID in database
   - Validates status transition (to-do → in-progress allowed)
   - Updates task with new status
   - Saves to database
3. **Response** returns updated task

**Backend responds:**

```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "success": true,
  "message": "Task updated successfully",
  "data": {
    "_id": "507f1f77bcf86cd799439011",
    "title": "Learn React",
    "status": "in-progress",
    "createdAt": "2026-01-22T10:30:00Z"
  }
}
```

---

## Validation Rules

### At Database Level (Mongoose Schema)

- `title` is **required** and **unique per collection**
- `title` is **trimmed** automatically
- `status` must be one of the enum values
- `createdAt` defaults to current timestamp

### At Controller Level (Business Logic)

- **Title validation:** Must not be empty after trim
- **Status transition validation:** Cannot skip from to-do directly to completed
- **Task existence check:** Before updating/deleting

### Why Two Levels?

- **Schema validation:** Prevents invalid data at source
- **Controller validation:** Enforces business rules and transitions

---

## Code Quality & Best Practices

### 1. Separation of Concerns

- **Models** handle data schema
- **Controllers** handle business logic
- **Routes** handle HTTP routing

### 2. Error Handling

- Try-catch blocks on async operations
- Meaningful error messages
- Consistent error response format

### 3. Security

- Input validation (required fields, enums)
- Status transition validation (prevents state corruption)
- CORS enabled for cross-origin requests
- Environment variables for sensitive data


## Summary

This backend provides a **robust, well-structured REST API** for task management with:

- ✅ Clean architecture (MVC-like pattern)
- ✅ Proper error handling and validation
- ✅ Business logic enforcement (status transitions)
- ✅ MongoDB persistence
- ✅ RESTful endpoint design
- ✅ Environment-based configuration

The design ensures data integrity, maintainability, and scalability for the MERN stack assessment.
